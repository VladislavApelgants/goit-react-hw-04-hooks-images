(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__PlIpk",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2srMu"}},13:function(e,t,a){e.exports={App:"App_App__1bT9P",sectionGallery:"App_sectionGallery__2ZXbb"}},14:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__24T3n",SearchForm:"Searchbar_SearchForm__24nvk",SearchFormButton:"Searchbar_SearchFormButton__1aWle",SearchFormInput:"Searchbar_SearchFormInput__1jL_g"}},22:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(7),c=a.n(s),o=(a(21),a(22),a(3)),l=a(4),i=a(6),u=a(5),h=a(8),m=(a(23),a(13)),p=a.n(m),g=a(14),b=a.n(g),d=a(16),j=a(1),y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.getQuery=function(t){var a=t.currentTarget.value;e.setState({query:a.toLowerCase()})},e.handleSubmit=function(t){var a=e.state.query;if(t.preventDefault(),""===a.trim())return h.b.warn("\u044d\u044d\u044d\u044d, \u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430, \u0432\u0432\u0435\u0434\u0438 \u0447\u0442\u043e-\u0442\u043e!");e.props.onSubmit(a),e.setState({query:""})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("header",{className:b.a.Searchbar,children:Object(j.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(j.jsx)("button",{type:"submit",className:"SearchFormButton",children:Object(j.jsx)("span",{className:"SearchFormButtonLabel",children:Object(j.jsx)(d.a,{size:"25px"})})}),Object(j.jsx)("input",{className:"SearchFormInput",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.getQuery})]})})}}]),a}(r.Component),f=a(12),O=a(15),v=a.n(O),I=(a(45),a(9)),x=a.n(I),S=a(11),_=a.n(S),k=a(48);function w(e){var t=e.data,a=e.modalImage;return Object(j.jsx)(j.Fragment,{children:t.map((function(e){return Object(j.jsx)("li",{className:_.a.ImageGalleryItem,onClick:a,large:e.largeImageURL,name:e.user,children:Object(j.jsx)("img",{src:e.webformatURL,alt:e.user,className:_.a.ImageGalleryItemImage})},Object(k.a)())}))})}var G=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={responseData:null,page:1,error:"",status:"idle"},e.changePage=function(){e.setState((function(e){return{page:e.page+1}}))},e.sendModalImage=function(t){var a=e.props.openLarge,r=t.currentTarget.attributes,n=r.large,s=r.name;a(n.value,s.value)},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=this.state.page,n=this.props.searchImage;e.searchImage!==n&&this.setState({responseData:null,page:1}),e.searchImage===n&&t.page===r||(this.setState({status:"pending"}),function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("23530022-92f1b2e37220c2d922c4e208a","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():new Error("\u0423\u043f\u0441,\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a =(")}))}(n,r).then((function(e){e.hits.length>0&&a.setState((function(t){return null!==t.responseData?{responseData:[].concat(Object(f.a)(e.hits),Object(f.a)(t.responseData)),status:"resolved"}:null===t.responseData?{responseData:e.hits,status:"resolved"}:void 0}))})).catch((function(e){return a.setState({error:e,status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.responseData,a=e.error,r=e.status;return"idle"===r?Object(j.jsx)("p",{className:x.a.enterQuery,children:"Enter query"}):"pending"===r?Object(j.jsx)("div",{className:x.a.spinnerBox,children:Object(j.jsx)(v.a,{type:"Oval",color:"#3f51b5",height:100,width:100,timeout:3e3})}):"resolved"===r?Object(j.jsxs)(j.Fragment,{children:[t&&Object(j.jsx)("button",{type:"button",className:"Button",onClick:this.changePage,children:"Load more"}),Object(j.jsx)("ul",{className:x.a.ImageGallery,children:t&&Object(j.jsx)(w,{data:t,modalImage:this.sendModalImage})})]}):"rejected"===r?Object(j.jsx)("p",{children:a.message}):void 0}}]),a}(r.Component),C=document.querySelector("#modal-root"),F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).closeByEscape=function(t){"Escape"===t.code&&e.props.onClose()},e.closeByClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.closeByEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.closeByEscape)}},{key:"render",value:function(){return Object(s.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:this.closeByClick,children:Object(j.jsx)("div",{className:"Modal",children:Object(j.jsx)("img",{src:this.props.img,alt:this.props.alt})})}),C)}}]),a}(r.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchbarQuery:"",showModal:!1,large:"",descr:""},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.searchbarFormSubmit=function(t){e.setState({searchbarQuery:t.trim()})},e.largeImg=function(t,a){e.setState({large:t,descr:a}),e.toggleModal()},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(y,{onSubmit:this.searchbarFormSubmit}),Object(j.jsx)("section",{className:p.a.sectionGallery,children:Object(j.jsx)(G,{searchImage:this.state.searchbarQuery,openLarge:this.largeImg})}),this.state.showModal&&Object(j.jsx)(F,{onClose:this.toggleModal,img:this.state.large,alt:this.state.descr}),Object(j.jsx)(h.a,{position:"top-center",autoClose:3e3,theme:"dark"})]})}}]),a}(r.Component),B=N;c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3Nh5n",spinnerBox:"ImageGallery_spinnerBox__2UVd0",enterQuery:"ImageGallery_enterQuery__yrqnb"}}},[[46,1,2]]]);
//# sourceMappingURL=main.7ac1541c.chunk.js.map