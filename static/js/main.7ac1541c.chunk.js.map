{"version":3,"sources":["ImageGalleryItem/ImageGalleryItem.module.scss","App/App.module.scss","Searchbar/Searchbar.module.scss","Searchbar/Searchbar.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","imageApi/imageApi.js","Modal/Modal.js","App/App.js","index.js","ImageGallery/ImageGallery.module.scss"],"names":["module","exports","Searchbar","state","query","getQuery","e","value","currentTarget","setState","toLowerCase","handleSubmit","preventDefault","trim","toast","warn","props","onSubmit","className","s","this","type","size","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","data","modalImage","map","elem","onClick","large","largeImageURL","name","user","src","webformatURL","alt","ImageGalleryItemImage","uuidv4","ImageGallery","responseData","page","error","status","changePage","prevState","sendModalImage","openLarge","attributes","prevProps","searchImage","fetch","then","resp","ok","json","Error","ImageApi","hits","length","previos","catch","enterQuery","spinnerBox","color","height","width","timeout","message","modalRef","document","querySelector","Modal","closeByEscape","code","onClose","closeByClick","target","window","addEventListener","removeEventListener","createPortal","img","App","searchbarQuery","showModal","descr","toggleModal","searchbarFormSubmit","largeImg","sectionGallery","position","autoClose","theme","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7ac1541c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__PlIpk\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2srMu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1bT9P\",\"sectionGallery\":\"App_sectionGallery__2ZXbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__24T3n\",\"SearchForm\":\"Searchbar_SearchForm__24nvk\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1aWle\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1jL_g\"};","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.scss';\nimport { FcSearch } from 'react-icons/fc';\n\nexport default class Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  getQuery = e => {\n    const { value } = e.currentTarget;\n    this.setState({ query: value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    const { query } = this.state;\n    e.preventDefault();\n    if (query.trim() === '') {\n      return toast.warn('ээээ, пустая строка, введи что-то!');\n    }\n\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchFormButton\">\n            <span className=\"SearchFormButtonLabel\">\n              <FcSearch size=\"25px\" />\n            </span>\n          </button>\n\n          <input\n            className=\"SearchFormInput\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.query}\n            onChange={this.getQuery}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import s from './ImageGalleryItem.module.scss';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default function ImageGalleryItem({ data, modalImage }) {\n  return (\n    <>\n      {data.map(elem => (\n        <li\n          key={uuidv4()}\n          className={s.ImageGalleryItem}\n          onClick={modalImage}\n          large={elem.largeImageURL}\n          name={elem.user}\n        >\n          <img\n            src={elem.webformatURL}\n            alt={elem.user}\n            className={s.ImageGalleryItemImage}\n          />\n        </li>\n      ))}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  data: PropTypes.array,\n  modalImage: PropTypes.func,\n};\n","import { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.scss';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport ImageApi from '../imageApi';\n\nexport default class ImageGallery extends Component {\n  state = {\n    responseData: null,\n    page: 1,\n    error: '',\n    status: 'idle',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { page } = this.state;\n    const { searchImage } = this.props;\n\n    if (prevProps.searchImage !== searchImage) {\n      this.setState({\n        responseData: null,\n        page: 1,\n      });\n    }\n\n    if (prevProps.searchImage !== searchImage || prevState.page !== page) {\n      this.setState({\n        status: 'pending',\n      });\n\n      ImageApi(searchImage, page)\n        .then(data => {\n          if (data.hits.length > 0) {\n            this.setState(previos => {\n              if (previos.responseData !== null) {\n                return {\n                  responseData: [...data.hits, ...previos.responseData],\n                  status: 'resolved',\n                };\n              } else if (previos.responseData === null) {\n                return { responseData: data.hits, status: 'resolved' };\n              }\n            });\n          }\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n\n  changePage = () => {\n    this.setState(prevState => {\n      return { page: prevState.page + 1 };\n    });\n  };\n\n  sendModalImage = e => {\n    const { openLarge } = this.props;\n    const { large, name } = e.currentTarget.attributes;\n    openLarge(large.value, name.value);\n  };\n\n  render() {\n    const { responseData, error, status } = this.state;\n\n    if (status === 'idle') {\n      return <p className={s.enterQuery}>Enter query</p>;\n    }\n\n    if (status === 'pending') {\n      return (\n        <div className={s.spinnerBox}>\n          <Loader\n            type=\"Oval\"\n            color=\"#3f51b5\"\n            height={100}\n            width={100}\n            timeout={3000}\n          />\n        </div>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          {responseData && (\n            <button type=\"button\" className=\"Button\" onClick={this.changePage}>\n              Load more\n            </button>\n          )}\n          <ul className={s.ImageGallery}>\n            {responseData && (\n              <ImageGalleryItem\n                data={responseData}\n                modalImage={this.sendModalImage}\n              />\n            )}\n          </ul>\n        </>\n      );\n    }\n\n    if (status === 'rejected') {\n      return <p>{error.message}</p>;\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchImage: PropTypes.string,\n  openLarge: PropTypes.func,\n};\n","const MY_KEY = '23530022-92f1b2e37220c2d922c4e208a';\n\nexport default function ImageApi(query, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${MY_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(resp => {\n    if (resp.ok) {\n      return resp.json();\n    }\n    return new Error('Упс,что-то пошло не так =(');\n  });\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRef = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.closeByEscape);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.closeByEscape);\n  }\n\n  closeByEscape = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  closeByClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.closeByClick}>\n        <div className=\"Modal\">\n          <img src={this.props.img} alt={this.props.alt} />\n        </div>\n      </div>,\n      modalRef,\n    );\n  }\n}\n\nModal.propTypes = {\n  img: PropTypes.string,\n  alt: PropTypes.string,\n  onClose: PropTypes.func,\n};\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './App.module.scss';\nimport Searchbar from '../Searchbar';\nimport ImageGallery from '../ImageGallery';\nimport Modal from '../Modal';\n\nclass App extends Component {\n  state = {\n    searchbarQuery: '',\n    showModal: false,\n    large: '',\n    descr: '',\n  };\n\n  toggleModal = () => {\n    this.setState(state => {\n      return { showModal: !state.showModal };\n    });\n  };\n\n  searchbarFormSubmit = query => {\n    this.setState({ searchbarQuery: query.trim() });\n  };\n\n  largeImg = (img, alt) => {\n    this.setState({ large: img, descr: alt });\n    this.toggleModal();\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.searchbarFormSubmit} />\n        <section className={s.sectionGallery}>\n          <ImageGallery\n            searchImage={this.state.searchbarQuery}\n            openLarge={this.largeImg}\n          />\n        </section>\n        {this.state.showModal && (\n          <Modal\n            onClose={this.toggleModal}\n            img={this.state.large}\n            alt={this.state.descr}\n          />\n        )}\n\n        <ToastContainer position=\"top-center\" autoClose={3000} theme=\"dark\" />\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './style.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3Nh5n\",\"spinnerBox\":\"ImageGallery_spinnerBox__2UVd0\",\"enterQuery\":\"ImageGallery_enterQuery__yrqnb\"};"],"sourceRoot":""}