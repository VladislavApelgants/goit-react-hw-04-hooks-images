{"version":3,"sources":["ImageGalleryItem/ImageGalleryItem.module.scss","App/App.module.scss","Searchbar/Searchbar.module.scss","Searchbar/Searchbar.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","imageApi/imageApi.js","Modal/Modal.js","App/App.js","index.js","ImageGallery/ImageGallery.module.scss"],"names":["module","exports","Searchbar","onSubmit","useState","query","setQuery","clear","className","s","e","preventDefault","trim","toast","warn","type","size","autoComplete","autoFocus","placeholder","value","onChange","lowerCase","currentTarget","toLowerCase","ImageGalleryItem","data","modalImage","map","elem","onClick","large","largeImageURL","name","user","src","webformatURL","alt","ImageGalleryItemImage","uuidv4","ImageGallery","searchImage","openLarge","page","handlPage","responseData","setResponseData","error","setError","status","setStatus","useEffect","fetch","then","resp","ok","json","Error","ImageApi","hits","length","prevResponseData","catch","enterQuery","spinnerBox","color","height","width","timeout","attributes","message","modalRef","document","querySelector","Modal","img","onClose","closeByEscape","console","log","code","window","addEventListener","removeEventListener","createPortal","target","App","searchbarQuery","setSearchbarQuery","showModal","setShowModal","setLarge","descr","setDescr","setPage","toggleModal","sectionGallery","prevPage","position","autoClose","theme","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bb9368f9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__PlIpk\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2srMu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1bT9P\",\"sectionGallery\":\"App_sectionGallery__2ZXbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__24T3n\",\"SearchForm\":\"Searchbar_SearchForm__24nvk\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1aWle\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1jL_g\"};","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.scss';\nimport { FcSearch } from 'react-icons/fc';\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const getQuery = e => {\n    const { value } = e.currentTarget;\n    const lowerCase = value.toLowerCase();\n    setQuery(lowerCase);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      return toast.warn('Пустая строка, введи что-то!');\n    }\n    onSubmit(query);\n    clear();\n  };\n\n  const clear = () => {\n    setQuery('');\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className=\"SearchForm\" onSubmit={handleSubmit}>\n        <button type=\"submit\" className=\"SearchFormButton\">\n          <span className=\"SearchFormButtonLabel\">\n            <FcSearch size=\"25px\" />\n          </span>\n        </button>\n\n        <input\n          className=\"SearchFormInput\"\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n          onChange={getQuery}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import s from './ImageGalleryItem.module.scss';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default function ImageGalleryItem({ data, modalImage }) {\n  return (\n    <>\n      {data.map(elem => (\n        <li\n          key={uuidv4()}\n          className={s.ImageGalleryItem}\n          onClick={modalImage}\n          large={elem.largeImageURL}\n          name={elem.user}\n        >\n          <img\n            src={elem.webformatURL}\n            alt={elem.user}\n            className={s.ImageGalleryItemImage}\n          />\n        </li>\n      ))}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  data: PropTypes.array,\n  modalImage: PropTypes.func,\n};\n","import { useState, useEffect } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.scss';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport ImageApi from '../imageApi';\n\nexport default function ImageGallery({\n  searchImage,\n  openLarge,\n  page,\n  handlPage,\n}) {\n  const [responseData, setResponseData] = useState(null);\n  const [error, setError] = useState('');\n  const [status, setStatus] = useState('idle');\n\n  useEffect(() => {\n    setResponseData(null);\n    setStatus('idle');\n  }, [searchImage]);\n\n  useEffect(() => {\n    if (!searchImage) {\n      return;\n    }\n\n    setStatus('pending');\n    ImageApi(searchImage, page)\n      .then(data => {\n        if (data.hits.length > 0) {\n          setResponseData(prevResponseData => {\n            if (prevResponseData) {\n              return [...data.hits, ...prevResponseData];\n            }\n            return setResponseData(data.hits);\n          });\n          setStatus('resolved');\n        }\n      })\n      .catch(error => {\n        setError(error);\n        setStatus('rejected');\n      });\n  }, [searchImage, page]);\n\n  const changePage = () => {\n    handlPage(page + 1);\n  };\n\n  const sendModalImage = e => {\n    const { large, name } = e.currentTarget.attributes;\n    openLarge(large.value, name.value);\n  };\n\n  if (status === 'idle') {\n    return <p className={s.enterQuery}>Enter query</p>;\n  }\n\n  if (status === 'pending') {\n    return (\n      <div className={s.spinnerBox}>\n        <Loader\n          type=\"Oval\"\n          color=\"#3f51b5\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n\n  if (status === 'resolved') {\n    return (\n      <>\n        {responseData && (\n          <button type=\"button\" className=\"Button\" onClick={changePage}>\n            Load more\n          </button>\n        )}\n        <ul className={s.ImageGallery}>\n          {responseData && (\n            <ImageGalleryItem data={responseData} modalImage={sendModalImage} />\n          )}\n        </ul>\n      </>\n    );\n  }\n\n  if (status === 'rejected') {\n    return <p>{error.message}</p>;\n  }\n}\n\nImageGallery.propTypes = {\n  searchImage: PropTypes.string,\n  openLarge: PropTypes.func,\n};\n","const MY_KEY = '23530022-92f1b2e37220c2d922c4e208a';\n\nexport default function ImageApi(query, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=${MY_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(resp => {\n    if (resp.ok) {\n      return resp.json();\n    }\n    return new Error('Упс,что-то пошло не так =(');\n  });\n}\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRef = document.querySelector('#modal-root');\n\nexport default function Modal({ img, alt, onClose }) {\n  useEffect(() => {\n    window.addEventListener('keydown', closeByEscape);\n\n    return function cleanup() {\n      return window.removeEventListener('keydown', closeByEscape);\n    };\n  });\n\n  function closeByEscape(e) {\n    console.log(e.code);\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  }\n\n  function closeByClick(e) {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  }\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={closeByClick}>\n      <div className=\"Modal\">\n        <img src={img} alt={alt} />\n      </div>\n    </div>,\n    modalRef,\n  );\n}\n\nModal.propTypes = {\n  img: PropTypes.string,\n  alt: PropTypes.string,\n  onClose: PropTypes.func,\n};\n","import { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './App.module.scss';\nimport Searchbar from '../Searchbar';\nimport ImageGallery from '../ImageGallery';\nimport Modal from '../Modal';\n\nfunction App() {\n  const [searchbarQuery, setSearchbarQuery] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [large, setLarge] = useState('');\n  const [descr, setDescr] = useState('');\n  const [page, setPage] = useState(1);\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const searchbarFormSubmit = query => {\n    setSearchbarQuery(query.trim());\n    setPage(1);\n  };\n\n  const largeImg = (img, alt) => {\n    setLarge(img);\n    setDescr(alt);\n    toggleModal();\n  };\n\n  const changePage = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  return (\n    <>\n      <Searchbar onSubmit={searchbarFormSubmit} />\n      <section className={s.sectionGallery}>\n        <ImageGallery\n          searchImage={searchbarQuery}\n          openLarge={largeImg}\n          page={page}\n          handlPage={changePage}\n        />\n      </section>\n      {showModal && <Modal onClose={toggleModal} img={large} alt={descr} />}\n\n      <ToastContainer position=\"top-center\" autoClose={3000} theme=\"dark\" />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './style.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3Nh5n\",\"spinnerBox\":\"ImageGallery_spinnerBox__2UVd0\",\"enterQuery\":\"ImageGallery_enterQuery__yrqnb\"};"],"sourceRoot":""}